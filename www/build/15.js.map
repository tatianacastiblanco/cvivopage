{"version":3,"sources":["../../src/pages/chat/chat.module.ts","../../src/pages/chat/chat.ts"],"names":[],"mappings":"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","file":"15.js","sourcesContent":["\r\nimport { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { ChatPage } from './chat';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    ChatPage,\r\n  ],\r\n  imports: [\r\n    IonicPageModule.forChild(ChatPage),\r\n  ],\r\n  exports:[ChatPage]\r\n})\r\nexport class ChatPageModule {}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/chat/chat.module.ts","import { LoadingController } from 'ionic-angular';\r\nimport { AlertController } from 'ionic-angular';\r\nimport { DomSanitizer } from '@angular/platform-browser';\r\nimport { ChatService } from './../../services/ChatService';\r\nimport { AngularFirestore } from 'angularfire2/firestore';\r\nimport { ViewController } from 'ionic-angular';\r\n\r\nimport { IonicPage, NavController, NavParams, Content } from 'ionic-angular';\r\nimport { Component, ViewChild } from '@angular/core';\r\nimport * as firebase from 'Firebase';\r\nimport { UserInfo } from 'src/data/UserInfo';\r\n/**\r\n * Generated class for the ChatPage page.\r\n *\r\n * See https://ionicframework.com/docs/components/#navigation for more info on\r\n * Ionic pages and navigation.\r\n */\r\n\r\n@IonicPage()\r\n@Component({\r\n  selector: 'page-chat',\r\n  templateUrl: 'chat.html',\r\n})\r\nexport class ChatPage {\r\n  @ViewChild(Content) content: Content;\r\n  messages = [];\r\nnickname:string = '';\r\nemailUserChat:string = ''\r\noffStatus:boolean = false;\r\nprivate event;\r\nphotosArray = new Array;\r\nmessage = '';\r\nisLoading:boolean = true;\r\n\r\n  constructor(\r\n    public navCtrl: NavController, \r\n    public navParams: NavParams,\r\n    private viewCtrl:ViewController,\r\n    private db:AngularFirestore,\r\n    private chatService : ChatService,\r\n    private _DomSanitizationService: DomSanitizer,\r\n    private alertCtrl: AlertController,\r\n    private loadingCtrl: LoadingController) {\r\n\r\n  \r\n    this.nickname = \"\";\r\n         \r\n      this.photosArray = [];\r\n      this.messages = [];   \r\n      this.getChatSection();   \r\n\r\n    if(this.photosArray.length == 0) {\r\n      this.db.collection('photos').valueChanges().forEach(elem =>{\r\n        this.photosArray.push(elem);\r\n      })\r\n    };\r\n    \r\n    this.chatService.getMessages().subscribe(message => {            \r\n      let prueba = this.getCurrentUserPhoto(message['from']);     \r\n      message['picture'] = this._DomSanitizationService.bypassSecurityTrustResourceUrl(prueba);\r\n      this.messages.push(message);\r\n      setTimeout(() => {\r\n        if(this.offStatus === false) {\r\n          this.content.scrollToBottom(1000);\r\n        }\r\n      }, 50);\r\n      let objToSave =\r\n      {\r\n        created:message['created'],\r\n        from:message['from'],\r\n        text:message['text']\r\n      }\r\n      this.db.collection('chats').doc(this.event).collection('chatLog').doc('chatLog'+message['created']).set(objToSave)    \r\n    })\r\n   \r\n  };\r\n\r\n  loadMessges() {\r\n    \r\n    \r\n    \r\n    if(this.messages.length === 0 ) {\r\n     \r\n        this.event = localStorage.getItem('chatEvent');\r\n      \r\n          var docref = this.db.collection('chats').doc(this.event).collection('chatLog',ref => ref.orderBy('created'));         \r\n          docref.get().subscribe(result => {           \r\n            result.forEach(res=> {  \r\n              if (res.data().from !== undefined) {\r\n                let ObjtResult;\r\n                // this.photosArray[0].forEach(photo =>{  \r\n                for (let index = 0; index < this.photosArray[0].length; index++) {\r\n                  if(this.photosArray[0][index]['name'] === res.data().from) {\r\n                    ObjtResult = {\r\n                      created:res.data().created,\r\n                      from: res.data().from,\r\n                      text: res.data().text,\r\n                      picture:this._DomSanitizationService.bypassSecurityTrustResourceUrl(this.photosArray[0][index]['base64'])                     \r\n                    }                     \r\n                  break;              \r\n                  } else {\r\n                    ObjtResult = {\r\n                      created:res.data().created,\r\n                      from: res.data().from,\r\n                      text: res.data().text,\r\n                      picture:'assets/imgs/user.png'\r\n                    }  \r\n                  }                 \r\n                }\r\n                this.messages.push(ObjtResult)  \r\n              } else {\r\n                let ObjtResult;\r\n                ObjtResult = {\r\n                  created:res.data().created,\r\n                  from: res.data().from,\r\n                  text: res.data().text,\r\n                  picture:'assets/imgs/user.png'\r\n                };\r\n                this.messages.push(ObjtResult)   \r\n              } \r\n            })\r\n            setTimeout(() => {\r\n              if(this.offStatus === false) {\r\n                this.content.scrollToBottom(0);\r\n                this.isLoading = false;\r\n              }\r\n            },0);\r\n          })\r\n            \r\n      \r\n    }\r\n  };\r\n\r\n  getCurrentUserPhoto(name):string {   \r\n    let photo;\r\n    let tmp =true;\r\n    let index = 0;\r\n    if(name == undefined) {\r\n      photo = 'assets/imgs/user.png'\r\n    } else {\r\n      do {        \r\n        if (this.photosArray[0][index]['name'] === name) {\r\n          photo = (this.photosArray[0][index]['base64']);\r\n          tmp = false;\r\n        } else {\r\n          index += 1;\r\n        };\r\n        if(index == this.photosArray[0].length) {\r\n          photo = 'assets/imgs/user.png'\r\n          tmp = false;\r\n        }\r\n      } while (tmp);  \r\n    }        \r\n    return photo;\r\n  }\r\n\r\n  getChatSection() {    \r\n    this.db.collection('Config').valueChanges().subscribe(res=> {      \r\n      \r\n      this.event = res[0]['chatEvent'];\r\n      localStorage.setItem('chatEvent',this.event);    \r\n        if(this.nickname === '') {         \r\n          this.chatService.joinChat().then((nickname: UserInfo) => {                \r\n            this.nickname = nickname.name.toString(); \r\n            this.emailUserChat = nickname.email.toString();    \r\n            this.loadMessges()    \r\n        \r\n    },err => this.showAlert(err,'Error FbConfig'));  \r\n  };\r\n})\r\n  };\r\n\r\n  ionViewDidLoad() {\r\n    console.log('ionViewDidLoad ChatPage');\r\n    setTimeout(() => {\r\n          if(this.offStatus === false) {\r\n            this.content.scrollToBottom(1000);\r\n          }\r\n        }, 50);\r\n  };\r\n\r\n    /**\r\n   * Funcion para mostrar una alerta personalizada\r\n   * @param message mensaje para mostrar en el body de la alerta\r\n   * @param title  titulo para mostrar en el encabezado de la alerta\r\n   */\r\n\r\n  showAlert(message,title) {\r\n    let alert = this.alertCtrl.create({\r\n      title:title,\r\n      message:message,\r\n      buttons :[\r\n        {\r\n          text: 'Cancelar',\r\n          role: 'cancel',\r\n          cssClass:'btnalert-cancel',\r\n          handler: data => {\r\n            console.log('Cancel clicked');\r\n          }\r\n        },\r\n        {\r\n          text: 'Ok',  \r\n          cssClass: 'btnalert-ok',\r\n          handler: data =>{ }\r\n        }\r\n      ]\r\n    }).present();\r\n  };\r\n\r\n    /**\r\n   * Funcion que envia un mensaje por meido de SOCKET.IO\r\n   */\r\n\r\n  sendMessage() { \r\n    if(this.message !== '') {\r\n      this.chatService.sendMessage(this.message); \r\n      this.message = '';\r\n    }  \r\n  }\r\n\r\n   /**\r\n  * Funcion para que el usuario al oprimir ENTER pueda enviar un mensaje\r\n  * @param key codigo de la tecla presionada\r\n  */\r\n\r\n keyPress(key) {\r\n  if( key === 13 &&  this.message !== '') {\r\n    this.sendMessage()\r\n  }\r\n};\r\n\r\n\r\n  close(){\r\n    this.viewCtrl.dismiss();\r\n    this.chatService.disconnect();\r\n    this.nickname = '';\r\n    this.messages = [];\r\n  }\r\n\r\n};\r\n\r\n\r\n\r\nexport const snapshotToArray = snapshot => {\r\n  let returnArr = [];\r\n\r\n  snapshot.forEach(childSnapshot => {\r\n      let item = childSnapshot.val();\r\n      item.key = childSnapshot.key;\r\n      returnArr.push(item);\r\n  });\r\n\r\n  return returnArr;\r\n};\n\n\n// WEBPACK FOOTER //\n// ./src/pages/chat/chat.ts"],"sourceRoot":""}