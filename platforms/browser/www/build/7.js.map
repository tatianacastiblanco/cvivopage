{"version":3,"sources":["../../src/pages/movie-details/movie-details.module.ts","../../src/pages/movie-details/movie-details.ts"],"names":[],"mappings":"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","file":"7.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { MovieDetailsPage } from './movie-details';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    MovieDetailsPage,\r\n  ],\r\n  imports: [\r\n    IonicPageModule.forChild(MovieDetailsPage),\r\n  ],\r\n})\r\nexport class MovieDetailsPageModule {}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/movie-details/movie-details.module.ts","import { HomeScreenGroupItem } from './../../data/HomeScreenGroupItem';\r\nimport { VimeoService } from './../../services/VimeoService';\r\nimport { Component } from \"@angular/core\";\r\nimport {\r\n  IonicPage,\r\n  NavParams,\r\n  NavController,\r\n  ToastController,\r\n  AlertController,\r\n  Platform\r\n} from \"ionic-angular\";\r\nimport {\r\n  StreamingVideoOptions,\r\n  StreamingMedia\r\n} from \"@ionic-native/streaming-media\";\r\n\r\nimport { MoviesService } from \"../../services/MoviesService\";\r\nimport { UserService } from \"../../services/UserService\";\r\nimport { AuthService } from \"../../services/AuthService\";\r\n\r\nimport { Movie } from \"../../data/Movie\";\r\nimport { Helper } from \"../../data/Helper\";\r\nimport { DownloadService } from \"../../services/DownloadService\";\r\nimport { HomeScreenGroup } from '../../data/HomeScreenGroup';\r\n\r\n@IonicPage()\r\n@Component({\r\n  selector: \"page-movie-details\",\r\n  templateUrl: \"movie-details.html\"\r\n})\r\nexport class MovieDetailsPage {\r\n  userId: string = \"\";\r\n  movieId: string = \"\";\r\n  urlPathVideo: string = \"\";\r\n  movie: Movie;\r\n  homeScreenGroups: HomeScreenGroup[] = [];\r\n  recentlyAddedMovies: HomeScreenGroupItem[] = [];\r\n  title: string;\r\n  detailsPicture: string;\r\n  releaseYear: string;\r\n  rating: string;\r\n  description: string;\r\n\r\n  loaded = false;\r\n  isPartOfMyList = false;\r\n\r\n  isDownloading = false;\r\n  isDownloaded = false;\r\n\r\n  constructor(\r\n    private navCtrl: NavController,\r\n    private navParams: NavParams,\r\n    private streamingMedia: StreamingMedia,\r\n    private moviesService: MoviesService,\r\n    private userService: UserService,\r\n    private downloadService: DownloadService,\r\n    private toastController: ToastController,\r\n    private alertController: AlertController,\r\n    private platform: Platform,\r\n    private vimeoService:VimeoService,\r\n    private authService: AuthService\r\n  ) {\r\n    this.authService.afAuth.user.subscribe(user => {\r\n      this.userId = user.uid;\r\n    });\r\n\r\n    this.movie = this.navParams.get(\"movieId\");\r\n\r\n    // if (this.movieId == undefined) {\r\n    //   this.movieId = \"\";\r\n    // } else {\r\n    //   this.downloadService\r\n    //     .isMovieDownloaded(this.movieId)\r\n    //     .then((result: any) => {\r\n    //       this.isDownloaded = result.isDownloaded;\r\n    //     });\r\n    // }\r\n  }\r\n\r\n  ionViewDidLoad() {\r\n    console.log(\"ionViewDidLoad MovieDetailsPage\");\r\n\r\n    this.getMovie();\r\n     this.getRecentlyAddedMovies();\r\n  }\r\n\r\n  getMovie() {  \r\n\r\n      this.title = this.movie.name;\r\n      this.detailsPicture = this.movie.detailsPicture;\r\n      this.description = this.movie.description;  \r\n      this.urlPathVideo = this.movie.picture;\r\n      this.movieId = this.movie.movieId;\r\n \r\n\r\n     this.getIsPartOfMyList();\r\n  }\r\n\r\n  getCategoryMovies(){\r\n    this.vimeoService.getHomeScreenGroups().subscribe(result => {\r\n      this.homeScreenGroups = []\r\n      let category:any = result;\r\n\r\n      console.log(category);\r\n      \r\n    })\r\n  }\r\n  getRecentlyAddedMovies() {\r\n\r\n    this.vimeoService.getAllVideos().subscribe(result =>{      \r\n      let videos:any = result\r\n      videos.forEach(item => {\r\n        if(item.files[2] && item.pictures.sizes[3]){\r\n          let video = new HomeScreenGroupItem();\r\n          video.name = item.name;\r\n          video.picture = item.files[2].link;\r\n          video.description = item.description;\r\n          video.detailsPicture = item.pictures.sizes[3].link;\r\n          video.movieId = item.uri.split('/')[2];\r\n      \r\n  \r\n          this.recentlyAddedMovies.push(video)\r\n           this.recentlyAddedMovies = Helper.shuffle(this.recentlyAddedMovies);\r\n        }\r\n       \r\n      });\r\n      this.loaded = true;\r\n    },err => console.log(err))\r\n    // this.moviesService.getRecentlyAddedMovies().then((result: any) => {\r\n    //   this.recentlyAddedMovies = Helper.shuffle(result.movies);\r\n    // \r\n    // });\r\n   \r\n  }\r\n\r\n  getIsPartOfMyList() {\r\n\r\n\r\n    console.log('test')\r\n    \r\n    this.userService\r\n      .getIsMoviePartOfMyList(this.userId, this.movieId)\r\n      .then((result: any) => {\r\n        this.isPartOfMyList = result.isPartOfMyList;\r\n      });\r\n  }\r\n\r\n  addToMyList() {\r\n    this.userService\r\n      .addMovieToMyList(this.userId, this.movie)\r\n      .then((result: any) => {\r\n        this.isPartOfMyList = true;\r\n        this.showPartOfMyListToast(true);\r\n      });\r\n  }\r\n\r\n  removeFromMyList() {\r\n    this.userService\r\n      .removeMovieFromMyList(this.userId, this.movieId)\r\n      .then((result: any) => {\r\n        this.isPartOfMyList = false;\r\n        this.showPartOfMyListToast(false);\r\n      });\r\n  }\r\n\r\n  showPartOfMyListToast(added: boolean) {\r\n    let toast = this.toastController.create({\r\n      message: added ? \"Agregado a mi lista\" : \"Removido de mi lista\",\r\n      duration: 2000,\r\n      position: \"bottom\"\r\n    });\r\n\r\n    toast.present();\r\n  }\r\n\r\n  goToMovie(movie: Movie) {\r\n    //this.navCtrl.push(\"MovieDetailsPage\", { movieId: movie });\r\n    this.navCtrl.pop().then(() =>{\r\n      this.navCtrl.push(\"MovieDetailsPage\", { movieId: movie });\r\n    })\r\n  }\r\n\r\n  private newMethod() {\r\n    return \"MovieDetailsPage\";\r\n  }\r\n  // playMovie() {\r\n  //   if (!this.platform.is(\"cordova\")) {\r\n  //     let alert = this.alertController.create({\r\n  //       title: \"Run on device\",\r\n  //       subTitle: \"This feature is only available on a device!\",\r\n  //       buttons: [\"Dismiss\"]\r\n  //     });\r\n\r\n  //     alert.present();\r\n  //     return;\r\n  //   }\r\n    \r\n    // if (this.movie.videoUrl === \"\") {\r\n    //   let alert = this.alertController.create({\r\n    //     title: \"This movie has not yet been uploaded!\",\r\n    //     subTitle:\r\n    //       \"Use the Admin Ion Netflix to add the movie and watch it here!\",\r\n    //     buttons: [\"Dismiss\"]\r\n    //   });\r\n\r\n    //   alert.present();\r\n    //   return;\r\n    // }\r\n\r\n    // let options: StreamingVideoOptions = {\r\n    //   successCallback: () => {\r\n    //     console.log(\"Video played\");\r\n    //   },\r\n\r\n    //   errorCallback: e => {\r\n    //     console.log(\"Error streaming\");\r\n    //   },\r\n\r\n    //   orientation: \"landscape\",\r\n    //   shouldAutoClose: true,\r\n    //   controls: true\r\n    // };\r\n\r\n    // this.streamingMedia.playVideo(this.movie.videoUrl, options);\r\n  // }\r\n\r\n  // downloadMovie() {\r\n  //   // make sure this is on a device, not an emulation (e.g. chrome tools device mode)\r\n  //   if (!this.platform.is(\"cordova\")) {\r\n  //     this.showDownloadOnDeviceOnlyToast();\r\n  //     return false;\r\n  //   }\r\n\r\n    // if (this.movie.videoUrl === \"\") {\r\n    //   let alert = this.alertController.create({\r\n    //     title: \"This movie has not yet been uploaded!\",\r\n    //     subTitle:\r\n    //       \"Use the Admin Ion Netflix to add the movie and download it here!\",\r\n    //     buttons: [\"Dismiss\"]\r\n    //   });\r\n\r\n    //   alert.present();\r\n    //   return;\r\n    // }\r\n\r\n    // this.isDownloading = true;\r\n\r\n    // this.downloadService.movieFileTransfer.onProgress(event => {\r\n    //   var progress = Math.round((event.loaded / event.total) * 100);\r\n    //   document.getElementById(\"progressText\").innerText = progress + \"%\";\r\n    // });\r\n\r\n    // this.downloadService.downloadMovie(this.movie).then(\r\n    //   (result: any) => {\r\n    //     this.showDownloadToast(this.movie.name);\r\n    //     this.isDownloading = false;\r\n    //     this.isDownloaded = true;\r\n    //   },\r\n    //   (error: any) => {\r\n    //     this.isDownloading = false;\r\n    //   }\r\n    // );\r\n  }\r\n\r\n  // showDownloadOnDeviceOnlyToast() {\r\n  //   let toast = this.toastController.create({\r\n  //     message: 'You can only download on a device!',\r\n  //     duration: 2000,\r\n  //     position: \"bottom\"\r\n  //   });\r\n\r\n  //   toast.present();\r\n  // }\r\n\r\n  // showDownloadToast(movieName: string) {\r\n  //   let toast = this.toastController.create({\r\n  //     message: 'Movie \"' + movieName + '\" successfully downloaded!',\r\n  //     duration: 2000,\r\n  //     position: \"bottom\"\r\n  //   });\r\n\r\n  //   toast.present();\r\n  // }\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/movie-details/movie-details.ts"],"sourceRoot":""}