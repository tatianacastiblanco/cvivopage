{"version":3,"sources":["../../src/pages/help/help.module.ts","../../src/pages/help/help.ts"],"names":[],"mappings":"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","file":"9.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { HelpPage } from './help';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    HelpPage,\r\n  ],\r\n  imports: [\r\n    IonicPageModule.forChild(HelpPage),\r\n  ],\r\n})\r\nexport class HelpPageModule {}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/help/help.module.ts","import { AuthService } from './../../services/AuthService';\r\nimport { Validators } from '@angular/forms';\r\nimport { FormBuilder } from '@angular/forms';\r\nimport { FormGroup } from '@angular/forms';\r\nimport { ticket } from './help';\r\nimport { NativeStorage } from '@ionic-native/native-storage';\r\nimport { HelpDeskProvider } from './../../providers/help-desk/help-desk';\r\nimport { EmailComposer } from '@ionic-native/email-composer';\r\nimport { Component } from '@angular/core';\r\nimport { IonicPage, NavController, NavParams, Platform, AlertController, LoadingController } from 'ionic-angular';\r\nimport * as moment from 'moment';\r\nexport interface ticket {\r\n  subject:string\r\n  id?:number,\r\n  description?:string,\r\n  status?: number,\r\n  email?:string,\r\n  phone?:string,\r\n  created_at?:string,\r\n  statusText?:string,\r\n  statusColor:string\r\n}\r\n\r\n\r\n@IonicPage()\r\n@Component({\r\n  selector: 'page-help',\r\n  templateUrl: 'help.html',\r\n})\r\nexport class HelpPage {\r\n\r\n  segementTickets:string = 'create'\r\n  myPhoto:string ; \r\n  myTickets:ticket[]=[];\r\n  userEmail:string;\r\n  hideSegment:boolean ;\r\n  private ticketFormGroup : FormGroup;\r\n\r\n  constructor(public navCtrl: NavController, \r\n              public navParams: NavParams,\r\n              private emailComposer: EmailComposer,\r\n              private ticketService: HelpDeskProvider,\r\n              private nativeStorage : NativeStorage,\r\n              private formBuilder: FormBuilder,\r\n              private alertCtrl:AlertController,\r\n              private authService: AuthService,\r\n              private loadingCtrl: LoadingController,\r\n              private platform: Platform) {\r\n\r\n                this.authService.afAuth.user.subscribe(user => {\r\n                  if(user == null){\r\n                    this.hideSegment = true;\r\n                  }\r\n                  this.userEmail = user.email\r\n                \r\n                 });\r\n\r\n                this.ticketFormGroup = this.formBuilder.group({\r\n                  email: ['', Validators.required],\r\n                  phone: ['', Validators.required],\r\n                  subject: ['', Validators.required],\r\n                  description: ['', Validators.required],\r\n                  type: ['', Validators.required],\r\n                  status:[''],\r\n                  priority:['']\r\n                });\r\n\r\n              \r\n\r\n                if (this.platform.is('cordova')) {\r\n                  this.nativeStorage.getItem('imgSource').then(res =>{\r\n                    if(res){\r\n                      this.myPhoto = res;\r\n                    }else{\r\n                      this.myPhoto = 'assets/imgs/photo-camera.png'\r\n                    }\r\n                  },err => this.myPhoto = 'assets/imgs/photo-camera.png')\r\n                }else{\r\n                  this.myPhoto = 'assets/imgs/user.png'\r\n  }\r\n}\r\n\r\n  getTickets() {\r\n    this.myTickets = [];\r\n    var loading = this.loadingCtrl.create({\r\n      spinner: \"bubbles\",\r\n      content: \"Cargando tickets...\"\r\n    });\r\n\r\n    loading.present();\r\n    this.ticketService.getMyTickets().subscribe((res:ticket[]) =>{\r\n\r\n      if(res.length == 0){\r\n        this.showAlert('No tienes tickets','Tickets');\r\n        this.segementTickets = 'create';\r\n        loading.dismiss();\r\n      }\r\n\r\n     let temp = res;\r\n      temp.forEach(element => {\r\n        let objTemp: ticket = {id:0,subject:'',created_at:'',status:0,statusColor:''};\r\n\r\n        switch (element.status) {\r\n            case 2:\r\n            objTemp.statusText = 'Abierto'\r\n            objTemp.statusColor = 'Abierto'\r\n            break;\r\n            case 3:\r\n            objTemp.statusText = 'En progreso'\r\n            objTemp.statusColor = 'Pendiente'\r\n            break;\r\n            case 4:\r\n            objTemp.statusText = 'Resuelto'\r\n            objTemp.statusColor = 'Cerrado'\r\n            break;\r\n        \r\n          default:\r\n            break;\r\n        }\r\n        \r\n        objTemp.created_at =moment(element.created_at).startOf('day').fromNow();\r\n        objTemp.subject = element.subject;\r\n        objTemp.id = element.id\r\n        this.myTickets.push(objTemp)\r\n        loading.dismiss();\r\n      });\r\n\r\n    }, err =>{\r\n      console.log(err)\r\n      loading.dismiss();\r\n      this.showAlert(err,'Error al cargar tickets')\r\n    } );     \r\n  };\r\n\r\n  /**\r\n * Funcion que se ejecuta al hacer swipe down en la pantalla\r\n * para recargar el video \r\n * @param refresher \r\n */\r\ndoRefresh(refresher) {  \r\n      \r\n    this.getTickets()\r\n    refresher.complete();\r\n  setTimeout(() => {\r\n    refresher.complete()\r\n  }, 3000);\r\n \r\n};\r\n\r\n  createTicket(){\r\n    var loading = this.loadingCtrl.create({\r\n      spinner: \"bubbles\",\r\n      content: \"Creando ticket...\"\r\n    });\r\n\r\n    loading.present();\r\n    this.ticketFormGroup.controls.status.setValue(2);\r\n    this.ticketFormGroup.controls.priority.setValue(1);\r\n    this.ticketFormGroup.controls.email.setValue(this.userEmail);    \r\n    this.ticketService.createTicket(this.ticketFormGroup.value).subscribe(result=>{\r\n      this.ticketFormGroup.reset();\r\n      \r\n      loading.dismiss()\r\n      this.showAlert('Tu ticket fue creado con el ID: '+ result['id'],'Ticket Creado')\r\n    },err =>{\r\n      loading.dismiss()\r\n      this.showAlert(err,'Error al crear ticket')\r\n    })\r\n  }\r\n\r\n  showAlert(message,title){\r\n    let alert = this.alertCtrl.create({\r\n      title:title,\r\n      message:message,\r\n      buttons :[\r\n        {\r\n          text: 'Cancelar',\r\n          role: 'cancel',\r\n          cssClass:'btnalert-cancel',\r\n          handler: data => {\r\n            console.log('Cancel clicked');\r\n          }\r\n        },\r\n        {\r\n          text: 'Ok',  \r\n          cssClass: 'btnalert-ok',\r\n          handler: data =>{            \r\n          }\r\n         }\r\n      ]\r\n    }).present();\r\n  };\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/help/help.ts"],"sourceRoot":""}