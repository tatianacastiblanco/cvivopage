{"version":3,"sources":["../../src/pages/downloads/downloads.module.ts","../../src/pages/downloads/downloads.ts","../../src/data/DownloadItem.ts"],"names":[],"mappings":"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","file":"9.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { DownloadsPage } from './downloads';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    DownloadsPage,\r\n  ],\r\n  imports: [\r\n    IonicPageModule.forChild(DownloadsPage),\r\n  ],\r\n})\r\nexport class DownloadsPageModule {}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/downloads/downloads.module.ts","import { Component } from \"@angular/core\";\r\nimport {\r\n  IonicPage,\r\n  AlertController\r\n} from \"ionic-angular\";\r\nimport {\r\n  StreamingVideoOptions,\r\n  StreamingMedia\r\n} from \"@ionic-native/streaming-media\";\r\n\r\nimport { DownloadService } from \"../../services/DownloadService\";\r\nimport { DownloadItem } from \"../../data/DownloadItem\";\r\n\r\n@IonicPage()\r\n@Component({\r\n  selector: \"page-downloads\",\r\n  templateUrl: \"downloads.html\"\r\n})\r\nexport class DownloadsPage {\r\n  downloadType = \"movies\";\r\n  hasAnyDownloads = false;\r\n  movieDownloadItems: DownloadItem[] = [];\r\n  episodesDownloadItems: DownloadItem[] = [];\r\n\r\n  constructor(\r\n    private downloadService: DownloadService,\r\n    private alertCtrl: AlertController,\r\n    private streamingMedia: StreamingMedia\r\n  ) {}\r\n\r\n  ionViewDidLoad() {\r\n    console.log(\"ionViewDidLoad DownloadsPage\");\r\n  }\r\n\r\n  ionViewDidEnter() {\r\n    console.log(\"ionViewDidEnter DownloadsPage\");\r\n\r\n    this.loadDownloads();\r\n  }\r\n\r\n  loadDownloads() {\r\n    this.movieDownloadItems = [];\r\n    this.episodesDownloadItems = [];\r\n\r\n    this.hasAnyDownloads =\r\n      this.downloadService.moviesDownloaded.length > 0 ||\r\n      this.downloadService.episodesDownloaded.length > 0;\r\n\r\n    this.downloadService.moviesDownloaded.forEach(movie => {\r\n      var downloadItem = new DownloadItem();\r\n\r\n      downloadItem.itemId = movie.movieId;\r\n      downloadItem.name = movie.name;\r\n      downloadItem.picture = movie.picture;\r\n      downloadItem.isMovie = true;\r\n      downloadItem.downloadUrl = movie.downloadUrl;\r\n\r\n      this.movieDownloadItems.push(downloadItem);\r\n    });\r\n\r\n    this.downloadService.episodesDownloaded.forEach(episode => {\r\n      var downloadItem = new DownloadItem();\r\n\r\n      downloadItem.itemId = episode.episodeId;\r\n      downloadItem.name = episode.name;\r\n      downloadItem.picture = episode.picture;\r\n      downloadItem.isMovie = false;\r\n      downloadItem.downloadUrl = episode.downloadUrl;\r\n\r\n      this.episodesDownloadItems.push(downloadItem);\r\n    });\r\n  }\r\n\r\n  goToAvailableDownloads() {\r\n    // this.navCtrl.push(\"HorizontalListPage\", { title: \"Available Downloads\" });\r\n  }\r\n\r\n  playMovie(movieDownloadItem: DownloadItem) {\r\n    if (movieDownloadItem.downloadUrl === \"\") {\r\n      let alert = this.alertCtrl.create({\r\n        title: \"This movie has not yet been uploaded!\",\r\n        subTitle:\r\n          \"Use the Admin Ion Netflix to add the movie and watch it here!\",\r\n        buttons: [\"Dismiss\"]\r\n      });\r\n\r\n      alert.present();\r\n      return;\r\n    }\r\n\r\n    let options: StreamingVideoOptions = {\r\n      successCallback: () => {\r\n        console.log(\"Video played\");\r\n      },\r\n\r\n      errorCallback: e => {\r\n        console.log(\"Error streaming\");\r\n      },\r\n\r\n      orientation: \"landscape\",\r\n      shouldAutoClose: true,\r\n      controls: true\r\n    };\r\n\r\n    this.streamingMedia.playVideo(movieDownloadItem.downloadUrl, options);\r\n  }\r\n\r\n  playEpisode(episodeDownloadItem: DownloadItem) {\r\n    if (episodeDownloadItem.downloadUrl === \"\") {\r\n      let alert = this.alertCtrl.create({\r\n        title: \"This episode has not yet been uploaded!\",\r\n        subTitle:\r\n          \"Use the Admin Ion Netflix to add the episode and watch it here!\",\r\n        buttons: [\"Dismiss\"]\r\n      });\r\n\r\n      alert.present();\r\n      return;\r\n    }\r\n\r\n    let options: StreamingVideoOptions = {\r\n      successCallback: () => {\r\n        console.log(\"Video played\");\r\n      },\r\n\r\n      errorCallback: e => {\r\n        console.log(\"Error streaming\");\r\n      },\r\n\r\n      orientation: \"landscape\",\r\n      shouldAutoClose: true,\r\n      controls: true\r\n    };\r\n\r\n    this.streamingMedia.playVideo(episodeDownloadItem.downloadUrl, options);\r\n  }\r\n\r\n  deleteMovie(movieDownloadItem: DownloadItem) {\r\n    this.presentMovieDeleteConfirm(movieDownloadItem);\r\n  }\r\n\r\n  presentMovieDeleteConfirm(movieDownloadItem: DownloadItem) {\r\n    let alert = this.alertCtrl.create({\r\n      title: \"Delete downloaded movie.\",\r\n      message: \"Do you want to delete this download?\",\r\n      buttons: [\r\n        {\r\n          text: \"No\",\r\n          role: \"cancel\",\r\n          handler: () => {\r\n            console.log(\"Cancel clicked\");\r\n          }\r\n        },\r\n        {\r\n          text: \"Yes\",\r\n          handler: () => {\r\n            console.log(\"Yes clicked\");\r\n\r\n            this.downloadService\r\n              .deleteMovie(movieDownloadItem.itemId)\r\n              .then((result: any) => {\r\n                const index = this.movieDownloadItems.indexOf(\r\n                  movieDownloadItem\r\n                );\r\n                if (index > -1) {\r\n                  this.movieDownloadItems.splice(index, 1);\r\n                }\r\n\r\n                this.hasAnyDownloads =\r\n                  this.downloadService.moviesDownloaded.length > 0 ||\r\n                  this.downloadService.episodesDownloaded.length > 0;\r\n              });\r\n          }\r\n        }\r\n      ]\r\n    });\r\n\r\n    alert.present();\r\n  }\r\n\r\n  deleteEpisode(episodesDownloadItems: DownloadItem) {\r\n    this.presentEpisodeDeleteConfirm(episodesDownloadItems);\r\n  }\r\n\r\n  presentEpisodeDeleteConfirm(episodeDownloadItem: DownloadItem) {\r\n    let alert = this.alertCtrl.create({\r\n      title: \"Delete downloaded episode.\",\r\n      message: \"Do you want to delete this download?\",\r\n      buttons: [\r\n        {\r\n          text: \"No\",\r\n          role: \"cancel\",\r\n          handler: () => {\r\n            console.log(\"Cancel clicked\");\r\n          }\r\n        },\r\n        {\r\n          text: \"Yes\",\r\n          handler: () => {\r\n            console.log(\"Yes clicked\");\r\n\r\n            this.downloadService\r\n              .deleteEpisode(episodeDownloadItem.itemId)\r\n              .then((result: any) => {\r\n                const index = this.episodesDownloadItems.indexOf(\r\n                  episodeDownloadItem\r\n                );\r\n                if (index > -1) {\r\n                  this.episodesDownloadItems.splice(index, 1);\r\n                }\r\n\r\n                this.hasAnyDownloads =\r\n                  this.downloadService.moviesDownloaded.length > 0 ||\r\n                  this.downloadService.episodesDownloaded.length > 0;\r\n              });\r\n          }\r\n        }\r\n      ]\r\n    });\r\n\r\n    alert.present();\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/downloads/downloads.ts","export class DownloadItem {\r\n  constructor() {}\r\n\r\n  itemId: string;\r\n  name: string;\r\n  picture: string;\r\n  isMovie: boolean;\r\n  downloadUrl: string;\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/data/DownloadItem.ts"],"sourceRoot":""}