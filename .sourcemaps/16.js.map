{"version":3,"sources":["../../src/pages/redeem/redeem.module.ts","../../src/pages/redeem/redeem.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAAyC;AACO;AACV;AAUtC;IAAA;IAA+B,CAAC;IAAnB,gBAAgB;QAR5B,+DAAQ,CAAC;YACR,YAAY,EAAE;gBACZ,2DAAU;aACX;YACD,OAAO,EAAE;gBACP,sEAAe,CAAC,QAAQ,CAAC,2DAAU,CAAC;aACrC;SACF,CAAC;OACW,gBAAgB,CAAG;IAAD,uBAAC;CAAA;AAAH;;;;;;;;;;;;;;;;;;;;;;ACZoD;AAEtB;AAClB;AACC;AACe;AAEzD;;;;;GAKG;AAOH;IAME,oBAAmB,OAAsB,EACtB,SAAoB,EACnB,QAAkB,EAClB,UAAuB,EACvB,QAAwB,EACxB,SAAyB,EACzB,SAAyB;QAN7C,iBAuBC;QAvBkB,YAAO,GAAP,OAAO,CAAe;QACtB,cAAS,GAAT,SAAS,CAAW;QACnB,aAAQ,GAAR,QAAQ,CAAU;QAClB,eAAU,GAAV,UAAU,CAAa;QACvB,aAAQ,GAAR,QAAQ,CAAgB;QACxB,cAAS,GAAT,SAAS,CAAgB;QACzB,cAAS,GAAT,SAAS,CAAgB;QAR7C,WAAM,GAAO,EAAC,IAAI,EAAC,EAAE,EAAC,KAAK,EAAC,EAAE,EAAC,CAAC;QAChC,eAAU,GAAW,KAAK,CAAC;QAWzB,QAAQ,CAAC,KAAK,EAAE,CAAC,IAAI,CAAC;YACpB,IAAI,KAAK,GAAU,QAAQ,CAAC,KAAK,EAAE,CAAC;YAEpC,EAAE,EAAC,KAAK,IAAI,GAAG,CAAC,CAAC,CAAC;gBAChB,KAAI,CAAC,IAAI,GAAG,IAAI,CAAC;YAGnB,CAAC;YAAC,IAAI,CAAC,CAAC;gBACN,KAAI,CAAC,IAAI,GAAG,KAAK,CAAC;YACpB,CAAC;QACH,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,QAAQ,GAAG,yIAAyI,CAAC;IAC5J,CAAC;IAGD,2BAAM,GAAN;QACE,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE,CAAC,CAAC,CAAC;YAC7B,IAAI,CAAC,QAAQ,CAAC,OAAO,EAAE,CAAC;QAC1B,CAAC;QAAC,IAAI,CAAC,CAAC;YACJ,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,YAAY,CAAC,CAAC;QAGvC,CAAC;IAEH,CAAC;IAED,+BAAU,GAAV,UAAW,KAAY;QACrB,IAAI,KAAK,GAAU,IAAI,MAAM,CAAC,8BAA8B,CAAC,CAAC;QAC9D,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC,KAAK,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,CAAC,CAAE,IAAI,CAAC,UAAU,GAAG,KAAK,CAAC;IACjF,CAAC;IACD,mCAAc,GAAd,UAAe,IAAQ;QACrB,IAAI,IAAI,GAAU,IAAI,CAAC,QAAQ,CAAC;QAChC,IAAI,WAAW,GAAU,IAAI,CAAC,SAAS,CAAC;QACxC,EAAE,EAAC,IAAI,CAAC,MAAM,IAAI,CAAE,CAAC,CAAC,CAAC;YACvB,IAAI,CAAC,WAAW,CAAC,8CAA8C,CAAC,CAAC;YACjE,MAAM,CAAC,KAAK,CAAC;QACf,CAAC;QACG,MAAM,CAAC,IAAI,KAAK,WAAW,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,KAAK,CAAC;IAC7C,CAAC;IAGH,gCAAW,GAAX,UAAY,CAAO;QAAnB,iBA6DC;QA3DC,CAAC,CAAC,cAAc,EAAE,CAAC;QACnB,CAAC,CAAC,eAAe,EAAE,CAAC;QACpB,6DAA6D;QAG7D,IAAI,CAAC,UAAU,CAAC,WAAW,CAAC,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,SAAS,CAAC,UAAC,GAAO;YAC9D,IAAI,SAAS,GAAU,GAAG,CAAC;YAC3B,EAAE,EAAC,GAAG,CAAC,MAAM,KAAK,CAAC,CAAC,CAAC,CAAC;gBACpB,KAAI,CAAC,MAAM,CAAC,KAAK,GAAG,wBAAwB,CAAC;YAC/C,CAAC;YAAC,IAAI,CAAC,CAAC;gBACN,EAAE,EAAC,SAAS,CAAC,CAAC,CAAC,CAAC,IAAI,IAAI,SAAS,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC;oBAC9C,KAAI,CAAC,MAAM,CAAC,KAAK,GAAG,wBAAwB,CAAC;gBAC/C,CAAC;gBAAC,IAAI,CAAC,CAAC;oBACN,IAAI,OAAK,GAAO,KAAI,CAAC,SAAS,CAAC,MAAM,CAAC;wBACpC,KAAK,EAAC,UAAU;wBAChB,MAAM,EAAE;4BACN;gCACE,IAAI,EAAE,OAAO;gCACb,WAAW,EAAE,QAAQ;gCACrB,IAAI,EAAE,OAAO;6BACd;4BACD;gCACE,IAAI,EAAE,MAAM;gCACZ,WAAW,EAAE,iBAAiB;gCAC9B,IAAI,EAAE,MAAM;6BACb;4BACD;gCACE,IAAI,EAAE,UAAU;gCAChB,WAAW,EAAE,YAAY;6BAC1B;4BACD;gCACE,IAAI,EAAE,WAAW;gCACjB,WAAW,EAAE,sBAAsB;6BACpC;yBACF;wBACD,OAAO,EAAC;4BACN;gCACE,IAAI,EAAE,UAAU;gCAChB,IAAI,EAAE,QAAQ;gCACd,QAAQ,EAAC,iBAAiB;6BAC3B;4BACD;gCACE,IAAI,EAAE,WAAW;gCACjB,QAAQ,EAAC,aAAa;gCACtB,OAAO,EAAE,cAAI;oCACZ,EAAE,EAAC,CAAC,KAAI,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;wCAC/B,KAAI,CAAC,WAAW,CAAC,8BAA8B,CAAC,CAAC;oCAClD,CAAC;oCAAA,IAAI,EAAC;oCAEN,CAAC;gCACF,CAAC;6BAEF;yBACF;qBACF,CAAC,CAAC,OAAO,EAAE,CAAC;gBACf,CAAC;YAEH,CAAC;QACH,CAAC,CAAC,CAAC;IACL,CAAC;IAED,gCAAW,GAAX,UAAY,OAAc;QACxB,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC;YACpB,OAAO,EAAE,OAAO;YAChB,QAAQ,EAAE,IAAI;YACd,QAAQ,EAAE,QAAQ;SACnB,CAAC,CAAC,OAAO,EAAE,CAAC;IACf,CAAC;IA/HU,UAAU;QAJtB,gEAAS,CAAC;YACT,QAAQ,EAAE,aAAa;WACG;SAC3B,CAAC;6EAOyC;YACX,gEAAS;YACT,0EAAQ;YACN,qEAAW;YACb,sEAAc;YACd,sEAAe;YACf,OAAe;OAZlC,UAAU,CAkItB;IAAD,CAAC;AAAA;SAlIY,UAAU,e","file":"16.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { RedeemPage } from './redeem';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    RedeemPage,\r\n  ],\r\n  imports: [\r\n    IonicPageModule.forChild(RedeemPage),\r\n  ],\r\n})\r\nexport class RedeemPageModule {}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/redeem/redeem.module.ts","import { ViewController, AlertController, ToastController } from \"ionic-angular\";\r\nimport { Coupon } from \"./../../data/Coupon\";\r\nimport { AuthService } from \"./../../services/AuthService\";\r\nimport { Platform } from \"ionic-angular\";\r\nimport { Component } from \"@angular/core\";\r\nimport { IonicPage, NavController, NavParams } from \"ionic-angular\";\r\n\r\n/**\r\n * Generated class for the RedeemPage page.\r\n *\r\n * See https://ionicframework.com/docs/components/#navigation for more info on\r\n * Ionic pages and navigation.\r\n */\r\n\r\n@IonicPage()\r\n@Component({\r\n  selector: \"page-redeem\",\r\n  templateUrl: \"redeem.html\",\r\n})\r\nexport class RedeemPage {\r\n\r\n  urlVideo:string;\r\n  menu:boolean;\r\n  coupon:any = {text:\"\",error:\"\"};\r\n  validRegex:boolean = false;\r\n  constructor(public navCtrl: NavController,\r\n              public navParams: NavParams,\r\n              private Platform: Platform,\r\n              private authServie: AuthService,\r\n              private viewCtrl: ViewController,\r\n              private alertCtrl:AlertController,\r\n              private toastCtrl:ToastController) {\r\n\r\n\r\n\r\n    Platform.ready().then(() => {\r\n      let width:number = Platform.width();\r\n\r\n      if(width <= 992) {\r\n        this.menu = true;\r\n\r\n\r\n      } else {\r\n        this.menu = false;\r\n      }\r\n    });\r\n\r\n    this.urlVideo = \"https://player.vimeo.com/external/367123294.sd.mp4?s=d5ea4eb860dbb8086b75221f541433a694ad31c3&profile_id=165&oauth2_token_id=1180246399\";\r\n  }\r\n\r\n\r\n  signIn():void {\r\n    if (this.navCtrl.canGoBack()) {\r\n      this.viewCtrl.dismiss();\r\n    } else {\r\n        this.navCtrl.setRoot(\"SignInPage\");\r\n\r\n\r\n    }\r\n\r\n  }\r\n\r\n  checkRegex(input:string):void {\r\n    let regex:RegExp = new RegExp(\"CP[0-9]+[A-Za-z0-9]+20+[0-9]\");\r\n    regex.test(input) === true ? this.validRegex = true :  this.validRegex = false;\r\n  }\r\n  checkPasswords(data:any):boolean {\r\n    let pass:string = data.password;\r\n    let confirmPass:string = data.password2;\r\n    if(pass.length <= 6 ) {\r\n    this.createToast(\"la contraseña debe tener minimo 6 caracteres\");\r\n    return false;\r\n  }\r\n      return pass === confirmPass ? true : false;\r\n    }\r\n\r\n\r\n  checkCoupon(e:Event):void {\r\n\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n    // this.navCtrl.push('SignUpPage',{coupon:this.coupon.text});\r\n\r\n\r\n    this.authServie.checkCoupon(this.coupon.text).subscribe((res:any)=> {\r\n      let couponRes:Coupon = res;\r\n      if(res.length === 0) {\r\n        this.coupon.error = \"Este código no existe.\";\r\n      } else {\r\n        if(couponRes[0].used || couponRes[0].finished) {\r\n          this.coupon.error = \"Este código ya se usó.\";\r\n        } else {\r\n          let alert:any = this.alertCtrl.create({\r\n            title:\"Registro\",\r\n            inputs: [\r\n              {\r\n                name: \"email\",\r\n                placeholder: \"Correo\",\r\n                type: \"email\"\r\n              },\r\n              {\r\n                name: \"name\",\r\n                placeholder: \"Nombre completo\",\r\n                type: \"text\"\r\n              },\r\n              {\r\n                name: \"password\",\r\n                placeholder: \"Contraseña\"\r\n              },\r\n              {\r\n                name: \"password2\",\r\n                placeholder: \"Confirmar contraseña\"\r\n              }\r\n            ],\r\n            buttons:[\r\n              {\r\n                text: \"Cancelar\",\r\n                role: \"cancel\",\r\n                cssClass:\"btnalert-cancel\"\r\n              },\r\n              {\r\n                text: \"Registrar\",\r\n                cssClass:\"btnalert-ok\",\r\n                handler: data => {\r\n                 if(!this.checkPasswords(data)) {\r\n                  this.createToast(\"Las contraseñas no coinciden\");\r\n                 }else{\r\n                   \r\n                 }\r\n                }\r\n\r\n              }\r\n            ]\r\n          }).present();\r\n        }\r\n\r\n      }\r\n    });\r\n  }\r\n\r\n  createToast(message:string):void {\r\n    this.toastCtrl.create({\r\n      message: message,\r\n      duration: 3000,\r\n      position: \"bottom\"\r\n    }).present();\r\n  }\r\n\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/redeem/redeem.ts"],"sourceRoot":""}